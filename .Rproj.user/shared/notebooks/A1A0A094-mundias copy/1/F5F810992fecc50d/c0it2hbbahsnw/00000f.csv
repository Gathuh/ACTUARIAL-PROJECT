"0","new_data <- lapply(data_list_logreturn, function(df) {"
"0","  index1 <- which(df$Log_Return <= -0.05)[1]"
"0","  index2 <- which(df$Log_Return >= 0.05)[1]"
"0","  company=df$company[1]"
"0","  Logreturn=df$Log_Return[1]"
"0","  "
"0","  if (is.na(index1)) {"
"0","    Datedown <- NA"
"0","    event <- NA"
"0","    Dateup <- NA"
"0","    Duration <- NA"
"0","  } else {"
"0","    Datedown <- df$Date[index1]"
"0","    "
"0","    if (is.na(index2) || index2 < index1) {"
"0","      Dateup <- tail(df$Date, 1)"
"0","      event <- 0"
"0","      Duration <- as.numeric(Dateup) - as.numeric(Datedown)"
"0","    } else {"
"0","      Dateup <- df$Date[index2]"
"0","      event <- 1"
"0","      Duration <- as.numeric(Dateup) - as.numeric(Datedown)"
"0","    }"
"0","  }"
"0","  "
"0","  return(list(company=company,Datedown = Datedown, Duration = Duration, event = event, Dateup = Dateup,Logreturn=Logreturn))"
"0","})"
"0",""
"0",""
