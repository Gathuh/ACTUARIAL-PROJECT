"0",""
"0","##############"
"0","library(dplyr)"
"0","###############"
"0","setwd(""Data"")"
"2","Warning: The working directory was changed to /home/gathu/Documents/CLASSES/Coursework/PROJECT/OUR PROJECT/DATA/STOCK SURVIVAL TIME/Data inside a notebook chunk. The working directory will be reset when the chunk is finished running. Use the knitr root.dir option in the setup chunk to change the working directory for notebook chunks."
"0","csv_files <- list.files(pattern = ""*csv"")"
"0",""
"0","data_list <- lapply(csv_files, readr::read_csv)"
"0","# Extract company name from file names"
"0","company_names <- gsub(""^HistoricalPrices \\(5\\)"", """", gsub("".csv"", """", csv_files))"
"0",""
"0","# Add company column to each dataframe in the list"
"0","for (i in seq_along(data_list)) {"
"0","  data_list[[i]]$company <- company_names[i]"
"0","}"
"0","data_list <- lapply(data_list, function(df) {"
"0","  df$Date <- as.Date(df$Date,format=""%m/%d/%y"")"
"0","  return(df)"
"0","})"
"0",""
"0",""
"0","data_list_logreturn <- lapply(data_list, function(df) {"
"0","  df %>% "
"0","    arrange(Date) %>% "
"0","    mutate(Log_Return = c( diff(log(Close)),NA))%>%.[-nrow(.),]%>%.[, c(1,5,7,8)]%>%"
"0","    filter(Date<""2010-12-31"" & Date>""2008-01-01"")"
"0","})"
